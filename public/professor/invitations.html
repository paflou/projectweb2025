<!doctype html>
<html lang="el">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="/stylesheets/style.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <title>Προβολή Προσκλήσεων - Professor</title>
</head>

<body id="body" class="d-flex flex-column min-vh-100">
    <div id="navbar"></div>

    <main class="flex-grow-1 container">
        <div class="row justify-content-center">
            <div class="col-12">
                <h2 class="display-4 text-center mt-4 mb-4">Προσκλήσεις Συμμετοχής σε Τριμελή Επιτροπή</h2>

                <!-- Loading indicator -->
                <div id="loadingIndicator" class="text-center my-5">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Φόρτωση...</span>
                    </div>
                    <p class="mt-2">Φόρτωση προσκλήσεων...</p>
                </div>

                <!-- No invitations message -->
                <div id="noInvitationsMessage" class="alert alert-info text-center d-none" role="alert">
                    <h4 class="alert-heading">Δεν υπάρχουν προσκλήσεις</h4>
                    <p class="mb-0">Δεν έχετε λάβει προσκλήσεις για συμμετοχή σε τριμελή επιτροπή αυτή τη στιγμή.</p>
                </div>

                <!-- Error message -->
                <div id="errorMessage" class="alert alert-danger text-center d-none" role="alert">
                    <h4 class="alert-heading">Σφάλμα</h4>
                    <p id="errorText" class="mb-0">Παρουσιάστηκε σφάλμα κατά τη φόρτωση των προσκλήσεων.</p>
                </div>

                <!-- Invitations container -->
                <div id="invitationsContainer" class="d-none">
                    <div class="row">
                        <div class="col-12">
                            <div class="card shadow-sm">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0">Ενεργές Προσκλήσεις</h5>
                                </div>
                                <div class="card-body p-0">
                                    <div class="table-responsive">
                                        <table class="table table-hover mb-0">
                                            <thead class="table-light">
                                                <tr>
                                                    <th scope="col">Τίτλος Διπλωματικής</th>
                                                    <th scope="col">Επιβλέπων Καθηγητής</th>
                                                    <th scope="col">Φοιτητής</th>
                                                    <th scope="col">Ημερομηνία Πρόσκλησης</th>
                                                    <th scope="col">Κατάσταση</th>
                                                    <th scope="col" class="text-center">Ενέργειες</th>
                                                </tr>
                                            </thead>
                                            <tbody id="invitationsTableBody">
                                                <!-- Invitations will be populated here -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Confirmation Modal for Accept -->
    <div class="modal fade" id="acceptModal" tabindex="-1" aria-labelledby="acceptModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="acceptModalLabel">Αποδοχή Πρόσκλησης</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Είστε σίγουροι ότι θέλετε να αποδεχτείτε την πρόσκληση για συμμετοχή στην τριμελή επιτροπή της
                        διπλωματικής:</p>
                    <p><strong id="acceptThesisTitle"></strong></p>
                    <p class="text-muted">Μετά την αποδοχή, θα γίνετε μέλος της τριμελούς επιτροπής αξιολόγησης.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Άκυρο</button>
                    <button type="button" class="btn btn-success" id="confirmAcceptBtn">Αποδοχή</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal for Reject -->
    <div class="modal fade" id="rejectModal" tabindex="-1" aria-labelledby="rejectModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="rejectModalLabel">Απόρριψη Πρόσκλησης</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Είστε σίγουροι ότι θέλετε να απορρίψετε την πρόσκληση για συμμετοχή στην τριμελή επιτροπή της
                        διπλωματικής:</p>
                    <p><strong id="rejectThesisTitle"></strong></p>
                    <p class="text-muted">Μετά την απόρριψη, η πρόσκληση θα αφαιρεθεί από τη λίστα σας.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Άκυρο</button>
                    <button type="button" class="btn btn-danger" id="confirmRejectBtn">Απόρριψη</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal for Leave -->
    <div class="modal fade" id="leaveModal" tabindex="-1" aria-labelledby="leaveModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="leaveModalLabel">Έξοδος από τριμελή επιτροπή</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Είστε σίγουροι ότι θέλετε να βγείτε απο την τριμελή επιτροπή της
                        διπλωματικής:</p>
                    <p><strong id="leaveThesisTitle"></strong></p>
                    <p class="text-muted">Μετά την απόρριψη, η πρόσκληση θα αφαιρεθεί από τη λίστα σας.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Άκυρο</button>
                    <button type="button" class="btn btn-danger" id="confirmLeaveBtn">Έξοδος</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Success/Error Toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="responseToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto" id="toastTitle">Ειδοποίηση</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                <!-- Message will be inserted here -->
            </div>
        </div>
    </div>

    <div id="footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
        </script>
    <script src="/js/loadPartials.js"></script>
    <script src="/js/invitations.js"></script>
    <script src="/js/getStatusBadge.js"></script>
</body>

</html>